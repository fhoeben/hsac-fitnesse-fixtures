<html><head><title>HsacAcceptanceTests.SlimTests.HttpTest.XmlHttpTest</title><meta http-equiv='Content-Type' content='text/html;charset=UTF-8'/><link rel='stylesheet' type='text/css' href='css/fitnesse.css'/><script src='javascript/jquery-1.11.3.min.js' type='text/javascript'></script><script src='javascript/fitnesse.js' type='text/javascript'></script></head><body><header><h2>HsacAcceptanceTests.SlimTests.HttpTest.XmlHttpTest</h2></header><article><br/><table>
	<tr class="slimRowTitle">
		<td>library</td>
	</tr>
	<tr class="slimRowColor0">
		<td><span class="pass">stop test fixture</span></td>
	</tr>
</table>
<br/><table>
	<tr class="slimRowTitle">
		<td>script</td>
		<td colspan="3"><span class="pass">mock xml server setup</span></td>
	</tr>
	<tr class="slimRowColor8">
		<td>add response</td>
		<td colspan="3"><pre>&lt;dag/&gt;</pre></td>
	</tr>
	<tr class="slimRowColor8">
		<td>add response</td>
		<td><pre>&lt;SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"&gt;
&lt;SOAP-ENV:Header/&gt;&lt;SOAP-ENV:Body&gt;
&lt;SOAP-ENV:Fault&gt;&lt;faultcode&gt;SOAP-ENV:Client&lt;/faultcode&gt;
&lt;faultstring&gt;Message does not have necessary info&lt;/faultstring&gt;
&lt;faultactor&gt;http://gizmos.com/order&lt;/faultactor&gt;
&lt;detail&gt;
&lt;PO:order xmlns:PO="http://gizmos.com/orders/"&gt;
Quantity element does not have a value&lt;/PO:order&gt;
&lt;PO:confirmation xmlns:PO="http://gizmos.com/confirm"&gt;
Incomplete address: no zip code&lt;/PO:confirmation&gt;
&lt;/detail&gt;&lt;/SOAP-ENV:Fault&gt;
&lt;/SOAP-ENV:Body&gt;&lt;/SOAP-ENV:Envelope&gt;</pre></td>
		<td>with status</td>
		<td>500</td>
	</tr>
	<tr class="slimRowColor8">
		<td>add response</td>
		<td><pre>&lt;SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"&gt;
&lt;SOAP-ENV:Header/&gt;&lt;SOAP-ENV:Body&gt;
&lt;SOAP-ENV:Fault&gt;&lt;faultcode&gt;soapenv:Server&lt;/faultcode&gt;
&lt;faultstring&gt;Message does not have necessary info&lt;/faultstring&gt;
&lt;faultactor&gt;http://gizmos.com/order&lt;/faultactor&gt;
&lt;detail&gt;
&lt;PO:order xmlns:PO="http://gizmos.com/orders/"&gt;
Quantity element does not have a value&lt;/PO:order&gt;
&lt;PO:confirmation xmlns:PO="http://gizmos.com/confirm"&gt;
Incomplete address: no zip code&lt;/PO:confirmation&gt;
&lt;/detail&gt;&lt;/SOAP-ENV:Fault&gt;
&lt;/SOAP-ENV:Body&gt;&lt;/SOAP-ENV:Envelope&gt;</pre></td>
		<td>with status</td>
		<td>500</td>
	</tr>
	<tr class="slimRowColor8">
		<td>add response</td>
		<td colspan="3"><no xml</td>
	</tr>
	<tr class="slimRowColor8">
		<td>add response</td>
		<td colspan="3"><pre>&lt;binary/&gt;</pre></td>
	</tr>
	<tr class="slimRowColor6">
		<td>$url&lt;-[http://192.168.0.112:8000/FitNesseMock]</td>
		<td colspan="3">get mock server url</td>
	</tr>
</table>
<br/><table>
	<tr class="slimRowTitle">
		<td>script</td>
		<td colspan="4"><span class="pass">xml http test</span></td>
	</tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>response time</td>
		<td colspan="3"><span class="pass">-1</span></td>
	</tr>
	<tr class="slimRowColor4">
		<td><span class="pass">post</span></td>
		<td><pre>&lt;Hallo/&gt;</pre></td>
		<td>to</td>
		<td colspan="2">$url->[http://192.168.0.112:8000/FitNesseMock]</td>
	</tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>xPath</td>
		<td>count(/dag)</td>
		<td colspan="2"><span class="pass">1</span></td>
	</tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>response time</td>
		<td colspan="3"><span class="pass">4&gt;0</span></td>
	</tr>
	<tr class="slimRowColor7">
		<td><span class="pass">reject</span></td>
		<td>post</td>
		<td><pre>&lt;ClientFault/&gt;</pre></td>
		<td>to</td>
		<td>$url->[http://192.168.0.112:8000/FitNesseMock]</td>
	</tr>
	<tr class="slimRowColor9">
		<td>show</td>
		<td colspan="4">response</td>
	<td><pre>&lt;SOAP-ENV:Envelope xmlns:SOAP-ENV=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;
    &lt;SOAP-ENV:Header/&gt;
    &lt;SOAP-ENV:Body&gt;
        &lt;SOAP-ENV:Fault&gt;
            &lt;faultcode&gt;SOAP-ENV:Client&lt;/faultcode&gt;
            &lt;faultstring&gt;Message does not have necessary info&lt;/faultstring&gt;
            &lt;faultactor&gt;http://gizmos.com/order&lt;/faultactor&gt;
            &lt;detail&gt;
                &lt;PO:order xmlns:PO=&quot;http://gizmos.com/orders/&quot;&gt;Quantity element does not have a value&lt;/PO:order&gt;
                &lt;PO:confirmation xmlns:PO=&quot;http://gizmos.com/confirm&quot;&gt;Incomplete address: no zip code&lt;/PO:confirmation&gt;
            &lt;/detail&gt;
        &lt;/SOAP-ENV:Fault&gt;
    &lt;/SOAP-ENV:Body&gt;
&lt;/SOAP-ENV:Envelope&gt;
</pre></td></tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>response status</td>
		<td colspan="3"><span class="pass">500</span></td>
	</tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>raw xPath</td>
		<td>/env:Envelope/env:Body/env:Fault/faultstring</td>
		<td colspan="2"><span class="pass">Message does not have necessary info</span></td>
	</tr>
	<tr class="slimRowColor9">
		<td>show</td>
		<td colspan="4">response headers</td>
	<td><table class="hash_table">
	<tr class="hash_row">
		<td class="hash_key">Date</td>
		<td class="hash_value">Thu, 14 Sep 2017 19:23:15 GMT</td>
	</tr>
	<tr class="hash_row">
		<td class="hash_key">Content-length</td>
		<td class="hash_value">556</td>
	</tr>
</table></td></tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>response header</td>
		<td>Content-length</td>
		<td colspan="2"><span class="pass">556</span></td>
	</tr>
	<tr class="slimRowColor8">
		<td>note</td>
		<td colspan="4">next line is commented out so we won't have a real exception, uncomment to see that SOAP content is shown in exception</td>
	</tr>
	<tr class="slimRowColor8">
		<td>note</td>
		<td>check</td>
		<td>xPath</td>
		<td>/env:Envelope/env:Body/env:Fault/faultstring</td>
		<td>Message does not have necessary info</td>
	</tr>
	<tr class="slimRowColor7">
		<td><span class="pass">reject</span></td>
		<td>post</td>
		<td><pre>&lt;ServerFault/&gt;</pre></td>
		<td>to</td>
		<td>$url->[http://192.168.0.112:8000/FitNesseMock]</td>
	</tr>
	<tr class="slimRowColor9">
		<td>show</td>
		<td colspan="4">response</td>
	<td><pre>&lt;SOAP-ENV:Envelope xmlns:SOAP-ENV=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;
    &lt;SOAP-ENV:Header/&gt;
    &lt;SOAP-ENV:Body&gt;
        &lt;SOAP-ENV:Fault&gt;
            &lt;faultcode&gt;soapenv:Server&lt;/faultcode&gt;
            &lt;faultstring&gt;Message does not have necessary info&lt;/faultstring&gt;
            &lt;faultactor&gt;http://gizmos.com/order&lt;/faultactor&gt;
            &lt;detail&gt;
                &lt;PO:order xmlns:PO=&quot;http://gizmos.com/orders/&quot;&gt;Quantity element does not have a value&lt;/PO:order&gt;
                &lt;PO:confirmation xmlns:PO=&quot;http://gizmos.com/confirm&quot;&gt;Incomplete address: no zip code&lt;/PO:confirmation&gt;
            &lt;/detail&gt;
        &lt;/SOAP-ENV:Fault&gt;
    &lt;/SOAP-ENV:Body&gt;
&lt;/SOAP-ENV:Envelope&gt;
</pre></td></tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>response status</td>
		<td colspan="3"><span class="pass">500</span></td>
	</tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>raw xPath</td>
		<td>/env:Envelope/env:Body/env:Fault/faultstring</td>
		<td colspan="2"><span class="pass">Message does not have necessary info</span></td>
	</tr>
	<tr class="slimRowColor8">
		<td>note</td>
		<td colspan="4">next line is commented out so we won't have a real exception, uncomment to see that SOAP content is shown in exception</td>
	</tr>
	<tr class="slimRowColor8">
		<td>note</td>
		<td>check</td>
		<td>xPath</td>
		<td>/env:Envelope/env:Body/env:Fault/faultstring</td>
		<td>Message does not have necessary info</td>
	</tr>
	<tr class="slimRowColor7">
		<td><span class="pass">reject</span></td>
		<td>post</td>
		<td><pre>&lt;NoXml/&gt;</pre></td>
		<td>to</td>
		<td>$url->[http://192.168.0.112:8000/FitNesseMock]</td>
	</tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>response status</td>
		<td colspan="3"><span class="pass">200</span></td>
	</tr>
	<tr class="slimRowColor8">
		<td>note</td>
		<td colspan="4">we use StopTestFixture as library to abort the test if status code is not what we expect</td>
	</tr>
	<tr class="slimRowColor0">
		<td>$responseStatus&lt;-[200]</td>
		<td colspan="4">response status</td>
	</tr>
	<tr class="slimRowColor3">
		<td><span class="pass">stop test if</span></td>
		<td>$responseStatus->[200]</td>
		<td>is not</td>
		<td colspan="2">200</td>
	</tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>response</td>
		<td colspan="3"><span class="pass">&lt;no xml</span></td>
	</tr>
	<tr class="slimRowColor8">
		<td>note</td>
		<td colspan="4">next line is commented out so we won't have a real exception, uncomment to see that non-XML content is shown in exception</td>
	</tr>
	<tr class="slimRowColor8">
		<td>note</td>
		<td>check</td>
		<td>xPath</td>
		<td>count(/*)</td>
		<td>0</td>
	</tr>
</table>
<br/><br/><br/><table>
	<tr class="slimRowTitle">
		<td><span class="pass">table: Mock Server Message Report</span></td>
	</tr>
<tr><td><table><tbody><tr class="scenario"><td class="diff">1 (of 5) request(s) did not match expectation</td></tr><tr class="scenario-detail"><td><table><tbody><tr><td class="green">1</td><td><div class="collapsible closed"><p class="title">request</p><div><pre>&lt;Hallo/&gt;
</pre></div></div></td><td><div class="collapsible closed"><p class="title">response</p><div><pre>&lt;dag/&gt;
</pre></div></div></td></tr><tr><td class="green">2</td><td><div class="collapsible closed"><p class="title">request</p><div><pre>&lt;ClientFault/&gt;
</pre></div></div></td><td><div class="collapsible closed"><p class="title">response</p><div><pre>&lt;SOAP-ENV:Envelope xmlns:SOAP-ENV=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;
    &lt;SOAP-ENV:Header/&gt;
    &lt;SOAP-ENV:Body&gt;
        &lt;SOAP-ENV:Fault&gt;
            &lt;faultcode&gt;SOAP-ENV:Client&lt;/faultcode&gt;
            &lt;faultstring&gt;Message does not have necessary info&lt;/faultstring&gt;
            &lt;faultactor&gt;http://gizmos.com/order&lt;/faultactor&gt;
            &lt;detail&gt;
                &lt;PO:order xmlns:PO=&quot;http://gizmos.com/orders/&quot;&gt;Quantity element does not have a value&lt;/PO:order&gt;
                &lt;PO:confirmation xmlns:PO=&quot;http://gizmos.com/confirm&quot;&gt;Incomplete address: no zip code&lt;/PO:confirmation&gt;
            &lt;/detail&gt;
        &lt;/SOAP-ENV:Fault&gt;
    &lt;/SOAP-ENV:Body&gt;
&lt;/SOAP-ENV:Envelope&gt;
</pre></div></div></td></tr><tr><td class="green">3</td><td><div class="collapsible closed"><p class="title">request</p><div><pre>&lt;ServerFault/&gt;
</pre></div></div></td><td><div class="collapsible closed"><p class="title">response</p><div><pre>&lt;SOAP-ENV:Envelope xmlns:SOAP-ENV=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;
    &lt;SOAP-ENV:Header/&gt;
    &lt;SOAP-ENV:Body&gt;
        &lt;SOAP-ENV:Fault&gt;
            &lt;faultcode&gt;soapenv:Server&lt;/faultcode&gt;
            &lt;faultstring&gt;Message does not have necessary info&lt;/faultstring&gt;
            &lt;faultactor&gt;http://gizmos.com/order&lt;/faultactor&gt;
            &lt;detail&gt;
                &lt;PO:order xmlns:PO=&quot;http://gizmos.com/orders/&quot;&gt;Quantity element does not have a value&lt;/PO:order&gt;
                &lt;PO:confirmation xmlns:PO=&quot;http://gizmos.com/confirm&quot;&gt;Incomplete address: no zip code&lt;/PO:confirmation&gt;
            &lt;/detail&gt;
        &lt;/SOAP-ENV:Fault&gt;
    &lt;/SOAP-ENV:Body&gt;
&lt;/SOAP-ENV:Envelope&gt;
</pre></div></div></td></tr><tr><td class="green">4</td><td><div class="collapsible closed"><p class="title">request</p><div><pre>&lt;NoXml/&gt;
</pre></div></div></td><td><div class="collapsible closed"><p class="title">response</p><div><no xml</div></div></td></tr><tr><td class="diff">5</td><td>No request received</td><td><div class="collapsible closed"><p class="title">response</p><div><pre>&lt;binary/&gt;
</pre></div></div></td></tr></tbody></table></td></tr></tbody></table></td></tr></table>
<br/><table>
	<tr class="slimRowTitle">
		<td>script</td>
		<td><span class="pass">mock xml server setup</span></td>
	</tr>
	<tr class="slimRowColor4">
		<td colspan="2">stop</td>
	</tr>
</table>
</article></body></html>