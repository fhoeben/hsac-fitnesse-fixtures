<html><head><title>HsacAcceptanceTests.SlimTests.HttpTest.PollingTests.HttpByHeaderTest</title><meta http-equiv='Content-Type' content='text/html;charset=UTF-8'/><link rel='stylesheet' type='text/css' href='css/fitnesse.css'/><script src='javascript/jquery-1.11.3.min.js' type='text/javascript'></script><script src='javascript/fitnesse.js' type='text/javascript'></script></head><body><header><h2>HsacAcceptanceTests.SlimTests.HttpTest.PollingTests.HttpByHeaderTest</h2></header><article><br/>We retry a call until a header of the response is a certain value.<br/><br/><div class="collapsible closed"><ul><li><a href='#' class='expandall'>Expand</a></li><li><a href='#' class='collapseall'>Collapse</a></li></ul>
	<p class="title">Setup server</p>
	<div><br/><table>
	<tr class="slimRowTitle">
		<td>script</td>
		<td><span class="pass">mock xml server setup</span></td>
	</tr>
	<tr class="slimRowColor8">
		<td>add response</td>
		<td>response</td>
	</tr>
	<tr class="slimRowColor8">
		<td>add response</td>
		<td>1 response</td>
	</tr>
	<tr class="slimRowColor8">
		<td>add response</td>
		<td>11 response</td>
	</tr>
	<tr class="slimRowColor8">
		<td>add response</td>
		<td>another response</td>
	</tr>
	<tr class="slimRowColor8">
		<td>add response</td>
		<td>yet another response</td>
	</tr>
	<tr class="slimRowColor6">
		<td>$url&lt;-[http://192.168.0.112:8000/FitNesseMock]</td>
		<td>get mock server url</td>
	</tr>
</table>
<br/></div>
</div>
<br/><table>
	<tr class="slimRowTitle">
		<td>script</td>
		<td colspan="4"><span class="pass">json http test</span></td>
	</tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>repeat interval</td>
		<td colspan="3"><span class="pass">100</span></td>
	</tr>
	<tr class="slimRowColor5">
		<td>set repeat interval to</td>
		<td>50</td>
		<td colspan="3">milliseconds</td>
	</tr>
	<tr class="slimRowColor9">
		<td>repeat at most</td>
		<td>2</td>
		<td colspan="3">times</td>
	</tr>
	<tr class="slimRowColor4">
		<td><span class="pass">post</span></td>
		<td>0 request</td>
		<td>to</td>
		<td colspan="2">$url->[http://192.168.0.112:8000/FitNesseMock]</td>
	</tr>
	<tr class="slimRowColor8">
		<td><span class="pass">repeat until header</span></td>
		<td>Content-length</td>
		<td>is</td>
		<td colspan="2">8</td>
	</tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>response header</td>
		<td>Content-length</td>
		<td colspan="2"><span class="pass">8</span></td>
	</tr>
	<tr class="slimRowColor4">
		<td><span class="pass">post</span></td>
		<td>0 request</td>
		<td>to</td>
		<td colspan="2">$url->[http://192.168.0.112:8000/FitNesseMock]</td>
	</tr>
	<tr class="slimRowColor8">
		<td><span class="pass">repeat until header</span></td>
		<td>Content-length</td>
		<td>is</td>
		<td colspan="2">11</td>
	</tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>response header</td>
		<td>Content-length</td>
		<td colspan="2"><span class="pass">11</span></td>
	</tr>
	<tr class="slimRowColor9">
		<td>repeat at most</td>
		<td>1</td>
		<td colspan="3">times</td>
	</tr>
	<tr class="slimRowColor7">
		<td><span class="pass">reject</span></td>
		<td>repeat until header</td>
		<td>Not present</td>
		<td>is</td>
		<td>bla</td>
	</tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>response</td>
		<td colspan="3"><span class="pass">another response</span></td>
	</tr>
	<tr class="slimRowColor8">
		<td><span class="pass">repeat until header</span></td>
		<td>Not present either</td>
		<td>is</td>
		<td colspan="2">null</td>
	</tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>response header</td>
		<td>Not present either</td>
		<td colspan="2"><span class="pass">null</span></td>
	</tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>repeat count</td>
		<td colspan="3"><span class="pass">0</span></td>
	</tr>
	<tr class="slimRowColor9">
		<td>show</td>
		<td colspan="4">response</td>
	<td>another response</td></tr>
</table>
<br/><br/><br/><br/><br/><br/><br/><br/><div class="collapsible closed"><ul><li><a href='#' class='expandall'>Expand</a></li><li><a href='#' class='collapseall'>Collapse</a></li></ul>
	<p class="title">Stop Server</p>
	<div><table>
	<tr class="slimRowTitle">
		<td><span class="pass">table: Mock Server Message Report</span></td>
	</tr>
<tr><td><table><tbody><tr class="scenario"><td class="diff">1 (of 7) request(s) did not match expectation</td></tr><tr class="scenario-detail"><td><table><tbody><tr><td class="green">1</td><td><div class="collapsible closed"><p class="title">request</p><div>GET: /FitNesseMock</div></div></td><td><div class="collapsible closed"><p class="title">response</p><div>{
	"airplanes": [{
		"id": "001",
		"type": "747",
		"brand": "Boeing",
		"seats": "400",
		"airline": "KLM"
	}, {
		"id": "002",
		"type": "737",
		"brand": "Boeing",
		"seats": "400",
		"airline": "Virgin"
	}]
    }
</div></div></td></tr><tr><td class="green">2</td><td><div class="collapsible closed"><p class="title">request</p><div>GET: /FitNesseMock</div></div></td><td><div class="collapsible closed"><p class="title">response</p><div>Broken</div></div></td></tr><tr><td class="green">3</td><td><div class="collapsible closed"><p class="title">request</p><div>0 request</div></div></td><td><div class="collapsible closed"><p class="title">response</p><div>response</div></div></td></tr><tr><td class="green">4</td><td><div class="collapsible closed"><p class="title">request</p><div>0 request</div></div></td><td><div class="collapsible closed"><p class="title">response</p><div>1 response</div></div></td></tr><tr><td class="green">5</td><td><div class="collapsible closed"><p class="title">request</p><div>0 request</div></div></td><td><div class="collapsible closed"><p class="title">response</p><div>11 response</div></div></td></tr><tr><td class="green">6</td><td><div class="collapsible closed"><p class="title">request</p><div>0 request</div></div></td><td><div class="collapsible closed"><p class="title">response</p><div>another response</div></div></td></tr><tr><td class="diff">7</td><td>No request received</td><td><div class="collapsible closed"><p class="title">response</p><div>yet another response</div></div></td></tr></tbody></table></td></tr></tbody></table></td></tr></table>
<br/><table>
	<tr class="slimRowTitle">
		<td>script</td>
		<td><span class="pass">mock xml server setup</span></td>
	</tr>
	<tr class="slimRowColor4">
		<td colspan="2">stop</td>
	</tr>
</table>
</div>
</div>
<br/><br/><br/></article></body></html>