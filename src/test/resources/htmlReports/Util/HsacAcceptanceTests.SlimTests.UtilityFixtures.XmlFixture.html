<html><head><title>HsacAcceptanceTests.SlimTests.UtilityFixtures.XmlFixture</title><meta http-equiv='Content-Type' content='text/html;charset=UTF-8'/><link rel='stylesheet' type='text/css' href='css/fitnesse.css'/><script src='javascript/jquery-1.11.3.min.js' type='text/javascript'></script><script src='javascript/fitnesse.js' type='text/javascript'></script></head><body><header><h2>HsacAcceptanceTests.SlimTests.UtilityFixtures.XmlFixture</h2></header><article><br/>XmlFixture allows checks on XML, similar to what is supported by XmlHttpTest, obtained from other sources than HTTP calls.<br/><br/><table>
	<tr class="slimRowTitle">
		<td>script</td>
		<td colspan="3"><span class="pass">xml fixture</span></td>
	</tr>
	<tr class="slimRowColor6">
		<td><span class="pass">load</span></td>
		<td colspan="3"><xml><nested><sub_nested a="1">Hello</sub_nested></nested></xml></td>
	</tr>
	<tr class="slimRowColor9">
		<td>show</td>
		<td colspan="3">document</td>
	<td><pre>&lt;xml&gt;
    &lt;nested&gt;
        &lt;sub_nested a=&quot;1&quot;&gt;Hello&lt;/sub_nested&gt;
    &lt;/nested&gt;
&lt;/xml&gt;
</pre></td></tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>xPath</td>
		<td>//sub_nested/@a</td>
		<td><span class="pass">1</span></td>
	</tr>
</table>
<br/><br/><table>
	<tr class="slimRowTitle">
		<td>script</td>
		<td colspan="3"><span class="pass">xml fixture</span></td>
	</tr>
	<tr class="slimRowColor6">
		<td><span class="pass">load</span></td>
		<td colspan="3"><pre>&lt;nested xmlns="http://ws.cdyne.com/WeatherWS/"&gt;&lt;sub_nested a="1"&gt;Hello&lt;/sub_nested&gt;&lt;sub_nested a="2"&gt;Bye&lt;/sub_nested&gt;&lt;/nested&gt;</pre></td>
	</tr>
	<tr class="slimRowColor9">
		<td>show</td>
		<td colspan="3">document</td>
	<td><pre>&lt;nested xmlns=&quot;http://ws.cdyne.com/WeatherWS/&quot;&gt;
    &lt;sub_nested a=&quot;1&quot;&gt;Hello&lt;/sub_nested&gt;
    &lt;sub_nested a=&quot;2&quot;&gt;Bye&lt;/sub_nested&gt;
&lt;/nested&gt;
</pre></td></tr>
	<tr class="slimRowColor5">
		<td>register prefix</td>
		<td>ws</td>
		<td>for namespace</td>
		<td><a href="http://ws.cdyne.com/WeatherWS/">http://ws.cdyne.com/WeatherWS/</a></td>
	</tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>xPath</td>
		<td>//sub_nested/@a</td>
		<td><span class="pass">null</span></td>
	</tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>xPath</td>
		<td>//ws:sub_nested/@a</td>
		<td><span class="pass">1</span></td>
	</tr>
	<tr class="slimRowColor9">
		<td>show</td>
		<td>list xPath matches</td>
		<td colspan="2">//ws:sub_nested/@a</td>
	<td>[1, 2]</td></tr>
</table>
<br/><h4 id="Validationofxmlagainstaschemafile">Validation of xml against a schema file</h4>
<br/><table>
	<tr class="slimRowTitle">
		<td>script</td>
		<td colspan="3"><span class="pass">xml fixture</span></td>
	</tr>
	<tr class="slimRowColor4">
		<td><span class="pass">load file</span></td>
		<td colspan="3"><a href="files/xmlTestExamples/valid_shiporder.xml">http://files/xmlTestExamples/valid_shiporder.xml</a></td>
	</tr>
	<tr class="slimRowColor8">
		<td><span class="pass">ensure</span></td>
		<td>validate against xsd file</td>
		<td colspan="2"><a href="files/xmlTestExamples/shiporder_schema.xsd">http://files/xmlTestExamples/shiporder_schema.xsd</a></td>
	</tr>
	<tr class="slimRowColor4">
		<td><span class="pass">load file</span></td>
		<td colspan="3"><a href="files/xmlTestExamples/invalid_shiporder.xml">http://files/xmlTestExamples/invalid_shiporder.xml</a></td>
	</tr>
	<tr class="slimRowColor0">
		<td>check</td>
		<td>validate against xsd file</td>
		<td><a href="files/xmlTestExamples/shiporder_schema.xsd">http://files/xmlTestExamples/shiporder_schema.xsd</a></td>
		<td><span class="pass">/.*Attribute 'orderid' must appear on element 'shiporder'.*/ found in: __EXCEPTION__:nl.hsac.fitnesse.fixture.slim.SlimFixtureException: message:&lt;&lt;XML Validation failed: cvc-complex-type.4: Attribute 'orderid' must appear on element 'shiporder'.&gt;&gt;
	at nl.hsac.fitnesse.fixture.util.XMLValidator.validateAgainst(XMLValidator.java:88) [file:/Users/fried/dev/hsac-fitnesse-fixtures/wiki/fixtures/]
	at nl.hsac.fitnesse.fixture.slim.XmlFixture.validateAgainstXsdFile(XmlFixture.java:100) [file:/Users/fried/dev/hsac-fitnesse-fixtures/wiki/fixtures/]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_181]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_181]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_181]
	at java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_181]
	at fitnesse.slim.fixtureInteraction.SimpleInteraction.methodInvoke(SimpleInteraction.java:256) [fitnesse-20190508.jar:20190508]
	at nl.hsac.fitnesse.fixture.slim.SlimFixture.invoke(SlimFixture.java:61) [file:/Users/fried/dev/hsac-fitnesse-fixtures/wiki/fixtures/]
	at nl.hsac.fitnesse.fixture.slim.SlimFixture.aroundSlimInvoke(SlimFixture.java:41) [file:/Users/fried/dev/hsac-fitnesse-fixtures/wiki/fixtures/]
	at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source) [n/a]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_181]
	at java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_181]
	at fitnesse.slim.fixtureInteraction.SimpleInteraction.methodInvoke(SimpleInteraction.java:256) [fitnesse-20190508.jar:20190508]
	at fitnesse.slim.fixtureInteraction.SimpleInteraction.callMethod(SimpleInteraction.java:239) [fitnesse-20190508.jar:20190508]
	at fitnesse.slim.fixtureInteraction.SimpleInteraction.invokeMethod(SimpleInteraction.java:223) [fitnesse-20190508.jar:20190508]
	at fitnesse.slim.fixtureInteraction.SimpleInteraction.findAndInvoke(SimpleInteraction.java:185) [fitnesse-20190508.jar:20190508]
	at fitnesse.slim.MethodExecutor.findAndInvoke(MethodExecutor.java:18) [fitnesse-20190508.jar:20190508]
	at fitnesse.slim.FixtureMethodExecutor.execute(FixtureMethodExecutor.java:18) [fitnesse-20190508.jar:20190508]
	at fitnesse.slim.StatementExecutor.getMethodExecutionResult(StatementExecutor.java:139) [fitnesse-20190508.jar:20190508]
	at fitnesse.slim.StatementExecutor.call(StatementExecutor.java:112) [fitnesse-20190508.jar:20190508]
	at fitnesse.slim.instructions.CallInstruction.executeInternal(CallInstruction.java:35) [fitnesse-20190508.jar:20190508]
	at fitnesse.slim.instructions.Instruction.execute(Instruction.java:29) [fitnesse-20190508.jar:20190508]
	at fitnesse.slim.ListExecutor$Executive.executeStatement(ListExecutor.java:49) [fitnesse-20190508.jar:20190508]
	at fitnesse.slim.ListExecutor$Executive.executeStatements(ListExecutor.java:43) [fitnesse-20190508.jar:20190508]
	at fitnesse.slim.ListExecutor.execute(ListExecutor.java:85) [fitnesse-20190508.jar:20190508]
	at fitnesse.slim.SlimServer.executeInstructions(SlimServer.java:82) [fitnesse-20190508.jar:20190508]
	at fitnesse.slim.SlimServer.processOneSetOfInstructions(SlimServer.java:75) [fitnesse-20190508.jar:20190508]
	at fitnesse.slim.SlimServer.tryProcessInstructions(SlimServer.java:62) [fitnesse-20190508.jar:20190508]
	at fitnesse.slim.SlimServer.serve(SlimServer.java:47) [fitnesse-20190508.jar:20190508]
	at fitnesse.testsystems.slim.InProcessSlimClient$1.run(InProcessSlimClient.java:55) [fitnesse-20190508.jar:20190508]
	at java.lang.Thread.run(Thread.java:748) [rt.jar:1.8.0_181]</span></td>
	</tr>
</table>
<br/><table>
	<tr class="slimRowTitle">
		<td>script</td>
		<td colspan="2"><span class="pass">file fixture</span></td>
	</tr>
	<tr class="slimRowColor2">
		<td>$xsd_schema&lt;-[<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;&gt;

&lt;xs:element name=&quot;shiporder&quot;&gt;
  &lt;xs:complexType&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name=&quot;orderperson&quot; type=&quot;xs:string&quot;/&gt;
      &lt;xs:element name=&quot;shipto&quot;&gt;
        &lt;xs:complexType&gt;
          &lt;xs:sequence&gt;
            &lt;xs:element name=&quot;name&quot; type=&quot;xs:string&quot;/&gt;
            &lt;xs:element name=&quot;address&quot; type=&quot;xs:string&quot;/&gt;
            &lt;xs:element name=&quot;city&quot; type=&quot;xs:string&quot;/&gt;
            &lt;xs:element name=&quot;country&quot; type=&quot;xs:string&quot;/&gt;
          &lt;/xs:sequence&gt;
        &lt;/xs:complexType&gt;
      &lt;/xs:element&gt;
      &lt;xs:element name=&quot;item&quot; maxOccurs=&quot;unbounded&quot;&gt;
        &lt;xs:complexType&gt;
          &lt;xs:sequence&gt;
            &lt;xs:element name=&quot;title&quot; type=&quot;xs:string&quot;/&gt;
            &lt;xs:element name=&quot;note&quot; type=&quot;xs:string&quot; minOccurs=&quot;0&quot;/&gt;
            &lt;xs:element name=&quot;quantity&quot; type=&quot;xs:positiveInteger&quot;/&gt;
            &lt;xs:element name=&quot;price&quot; type=&quot;xs:decimal&quot;/&gt;
          &lt;/xs:sequence&gt;
        &lt;/xs:complexType&gt;
      &lt;/xs:element&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:attribute name=&quot;orderid&quot; type=&quot;xs:string&quot; use=&quot;required&quot;/&gt;
  &lt;/xs:complexType&gt;
&lt;/xs:element&gt;

&lt;/xs:schema&gt;</pre>]</td>
		<td>content of</td>
		<td><a href="files/xmlTestExamples/shiporder_schema.xsd">http://files/xmlTestExamples/shiporder_schema.xsd</a></td>
	</tr>
</table>
<br/><h4 id="Wecanalsouseaschemafromthewikipage">We can also use a schema from the wiki page</h4>
<br/><table>
	<tr class="slimRowTitle">
		<td>script</td>
		<td colspan="2"><span class="pass">xml fixture</span></td>
	</tr>
	<tr class="slimRowColor4">
		<td><span class="pass">load file</span></td>
		<td colspan="2"><a href="files/xmlTestExamples/valid_shiporder.xml">http://files/xmlTestExamples/valid_shiporder.xml</a></td>
	</tr>
	<tr class="slimRowColor8">
		<td><span class="pass">ensure</span></td>
		<td>validate against xsd</td>
		<td>$xsd_schema->[<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;&gt;

&lt;xs:element name=&quot;shiporder&quot;&gt;
  &lt;xs:complexType&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name=&quot;orderperson&quot; type=&quot;xs:string&quot;/&gt;
      &lt;xs:element name=&quot;shipto&quot;&gt;
        &lt;xs:complexType&gt;
          &lt;xs:sequence&gt;
            &lt;xs:element name=&quot;name&quot; type=&quot;xs:string&quot;/&gt;
            &lt;xs:element name=&quot;address&quot; type=&quot;xs:string&quot;/&gt;
            &lt;xs:element name=&quot;city&quot; type=&quot;xs:string&quot;/&gt;
            &lt;xs:element name=&quot;country&quot; type=&quot;xs:string&quot;/&gt;
          &lt;/xs:sequence&gt;
        &lt;/xs:complexType&gt;
      &lt;/xs:element&gt;
      &lt;xs:element name=&quot;item&quot; maxOccurs=&quot;unbounded&quot;&gt;
        &lt;xs:complexType&gt;
          &lt;xs:sequence&gt;
            &lt;xs:element name=&quot;title&quot; type=&quot;xs:string&quot;/&gt;
            &lt;xs:element name=&quot;note&quot; type=&quot;xs:string&quot; minOccurs=&quot;0&quot;/&gt;
            &lt;xs:element name=&quot;quantity&quot; type=&quot;xs:positiveInteger&quot;/&gt;
            &lt;xs:element name=&quot;price&quot; type=&quot;xs:decimal&quot;/&gt;
          &lt;/xs:sequence&gt;
        &lt;/xs:complexType&gt;
      &lt;/xs:element&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:attribute name=&quot;orderid&quot; type=&quot;xs:string&quot; use=&quot;required&quot;/&gt;
  &lt;/xs:complexType&gt;
&lt;/xs:element&gt;

&lt;/xs:schema&gt;</pre>]</td>
	</tr>
</table>
</article></body></html>